<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional Blackjack</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #1a1a1a;
      color: #fff;
      overflow-x: hidden;
    }
    .table-container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: #2a2a2a;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    .bank-display {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 20px;
      font-weight: bold;
    }
    .bank-label { font-size: 12px; opacity: 0.9; margin-bottom: 4px; }
    .deck-counter { background: #3a3a3a; padding: 12px 24px; border-radius: 8px; text-align: center; }
    .deck-label { font-size: 12px; opacity: 0.7; margin-bottom: 4px; }
    .deck-value { font-size: 20px; font-weight: bold; color: #f59e0b; }
    .game-table {
      background: linear-gradient(135deg, #1e5631 0%, #0f3d20 100%);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    .section-label { font-size: 16px; font-weight: bold; margin-bottom: 15px; color: #fbbf24; text-align: center; }
    .cards-area {
      display: flex;
      justify-content: center;
      gap: -30px;
      margin: 20px 0;
      min-height: 140px;
      align-items: center;
    }
    .card {
      width: 90px;
      height: 130px;
      background: white;
      border: 2px solid #333;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 8px;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
      animation: dealCard 0.3s ease-out;
      margin: 0 -15px;
    }
    .card.red { color: #ef4444; }
    .card.black { color: #1f2937; }
    .card-back {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      justify-content: center;
      align-items: center;
      display: flex;
      font-size: 40px;
    }
    @keyframes dealCard {
      0% { transform: translateY(-100px) rotate(-10deg); opacity: 0; }
      100% { transform: translateY(0) rotate(0); opacity: 1; }
    }
    .score-display {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-top: 10px;
      padding: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      color: #fbbf24;
    }
    .divider { height: 2px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); margin: 30px 0; }
    .betting-area { background: #2a2a2a; border-radius: 16px; padding: 30px; margin-top: 20px; }
    .chips-container { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin: 20px 0; }
    .poker-chip {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
      border: 6px solid;
      position: relative;
    }
    .poker-chip::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 65%;
      height: 65%;
      border: 3px dashed;
      border-radius: 50%;
      opacity: 0.5;
      border-color: inherit;
    }
    .poker-chip:hover { transform: scale(1.1) translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6); }
    .chip-1 { background: #ef4444; border-color: #991b1b; color: white; }
    .chip-5 { background: #3b82f6; border-color: #1e3a8a; color: white; }
    .chip-25 { background: #22c55e; border-color: #14532d; color: white; }
    .chip-50 { background: #f59e0b; border-color: #78350f; color: white; }
    .chip-100 { background: #1f2937; border-color: #6b7280; color: white; }
    .chip-500 { background: #8b5cf6; border-color: #4c1d95; color: white; }
    .chip-value { font-size: 20px; font-weight: bold; z-index: 1; }
    .chip-label { font-size: 10px; z-index: 1; opacity: 0.8; }
    .game-controls { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin: 20px 0; }
    .action-btn {
      padding: 15px 30px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }
    .action-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4); }
    .action-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .btn-hit { background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; }
    .btn-stand { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; }
    .btn-double { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; }
    .btn-split { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; }
    .btn-insurance { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; }
    .btn-deal { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 18px; padding: 18px 40px; }
    .game-message {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      margin: 20px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .msg-win { color: #22c55e; background: rgba(34, 197, 94, 0.2); }
    .msg-lose { color: #ef4444; background: rgba(239, 68, 68, 0.2); }
    .msg-push { color: #f59e0b; background: rgba(245, 158, 11, 0.2); }
    .current-bet-display { text-align: center; margin: 20px 0; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    .current-bet-label { font-size: 14px; opacity: 0.7; margin-bottom: 5px; }
    .current-bet-value { font-size: 28px; font-weight: bold; color: #fbbf24; }
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #2a2a2a;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      z-index: 1000;
    }
    .back-btn:hover { background: #3a3a3a; }
  </style>
</head>
<body>
  <button class="back-btn" onclick="window.location.href='/ghub'">← Back to GameHub</button>

  <div class="table-container">
    <div class="top-bar">
      <div class="bank-display">
        <div class="bank-label">BANK</div>
        <div id="bankAmount">$1000</div>
      </div>
      <div class="deck-counter">
        <div class="deck-label">Cards in Deck</div>
        <div class="deck-value" id="deckCount">52</div>
      </div>
    </div>

    <div class="game-table">
      <div id="gameMessage" class="game-message" style="display: none;"></div>

      <div class="dealer-section">
        <div class="section-label">DEALER</div>
        <div class="cards-area" id="dealerCards"></div>
        <div class="score-display" id="dealerScore">—</div>
      </div>

      <div class="divider"></div>

      <div class="player-section">
        <div class="section-label">PLAYER</div>
        <div class="cards-area" id="playerCards"></div>
        <div class="score-display" id="playerScore">—</div>
      </div>

      <div class="game-controls" id="gameControls" style="display: none;">
        <button class="action-btn btn-hit" onclick="hit()">HIT</button>
        <button class="action-btn btn-stand" onclick="stand()">STAND</button>
        <button class="action-btn btn-double" id="doubleBtn" onclick="doubleDown()">DOUBLE</button>
        <button class="action-btn btn-split" id="splitBtn" onclick="split()" style="display: none;">SPLIT</button>
        <button class="action-btn btn-insurance" id="insuranceBtn" onclick="insurance()" style="display: none;">INSURANCE</button>
      </div>
    </div>

    <div class="betting-area" id="bettingArea">
      <div class="section-label">SELECT YOUR BET</div>
      <div class="current-bet-display">
        <div class="current-bet-label">Current Bet</div>
        <div class="current-bet-value">$<span id="currentBet">0</span></div>
      </div>
      <div class="chips-container">
        <div class="poker-chip chip-1" onclick="placeBet(1)">
          <div class="chip-value">$1</div>
        </div>
        <div class="poker-chip chip-5" onclick="placeBet(5)">
          <div class="chip-value">$5</div>
        </div>
        <div class="poker-chip chip-25" onclick="placeBet(25)">
          <div class="chip-value">$25</div>
        </div>
        <div class="poker-chip chip-50" onclick="placeBet(50)">
          <div class="chip-value">$50</div>
        </div>
        <div class="poker-chip chip-100" onclick="placeBet(100)">
          <div class="chip-value">$100</div>
        </div>
        <div class="poker-chip chip-500" onclick="placeBet(500)">
          <div class="chip-value">$500</div>
        </div>
      </div>
      <div class="game-controls">
        <button class="action-btn btn-deal" onclick="deal()" id="dealBtn">DEAL</button>
        <button class="action-btn btn-stand" onclick="clearBet()">CLEAR BET</button>
      </div>
    </div>
  </div>

  <script>
    let bank = 1000;
    let currentBet = 0;
    let deck = [];
    let playerHand = [];
    let dealerHand = [];
    let gameActive = false;

    const suits = ['♠', '♥', '♦', '♣'];
    const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
    const values = { 'A': 11, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 10, 'Q': 10, 'K': 10 };

    function initDeck() {
      deck = [];
      for (let suit of suits) {
        for (let rank of ranks) {
          deck.push({ rank, suit, value: values[rank] });
        }
      }
      shuffleDeck();
      updateDeckCount();
    }

    function shuffleDeck() {
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
    }

    function drawCard() {
      if (deck.length < 15) initDeck();
      updateDeckCount();
      return deck.pop();
    }

    function updateDeckCount() {
      document.getElementById('deckCount').textContent = deck.length;
    }

    function placeBet(amount) {
      if (gameActive) return;
      if (currentBet + amount > bank) {
        showMessage('Not enough money!', 'lose');
        return;
      }
      currentBet += amount;
      document.getElementById('currentBet').textContent = currentBet;
    }

    function clearBet() {
      if (gameActive) return;
      currentBet = 0;
      document.getElementById('currentBet').textContent = 0;
    }

    function deal() {
      if (currentBet === 0) {
        showMessage('Place a bet first!', 'lose');
        return;
      }
      if (currentBet > bank) {
        showMessage('Insufficient funds!', 'lose');
        return;
      }

      gameActive = true;
      bank -= currentBet;
      updateBank();

      playerHand = [drawCard(), drawCard()];
      dealerHand = [drawCard(), drawCard()];

      document.getElementById('bettingArea').style.display = 'none';
      document.getElementById('gameControls').style.display = 'flex';
      document.getElementById('gameMessage').style.display = 'none';

      renderHands();
      checkBlackjack();
    }

    function renderHands(hideDealer = true) {
      const playerCardsDiv = document.getElementById('playerCards');
      playerCardsDiv.innerHTML = '';
      playerHand.forEach(card => {
        const cardDiv = document.createElement('div');
        cardDiv.className = `card ${card.suit === '♥' || card.suit === '♦' ? 'red' : 'black'}`;
        cardDiv.innerHTML = `<div>${card.rank}${card.suit}</div><div style="font-size:40px">${card.suit}</div><div style="align-self:flex-end">${card.rank}${card.suit}</div>`;
        playerCardsDiv.appendChild(cardDiv);
      });

      const dealerCardsDiv = document.getElementById('dealerCards');
      dealerCardsDiv.innerHTML = '';
      dealerHand.forEach((card, idx) => {
        const cardDiv = document.createElement('div');
        if (hideDealer && idx === 1) {
          cardDiv.className = 'card card-back';
          cardDiv.innerHTML = '🎴';
        } else {
          cardDiv.className = `card ${card.suit === '♥' || card.suit === '♦' ? 'red' : 'black'}`;
          cardDiv.innerHTML = `<div>${card.rank}${card.suit}</div><div style="font-size:40px">${card.suit}</div><div style="align-self:flex-end">${card.rank}${card.suit}</div>`;
        }
        dealerCardsDiv.appendChild(cardDiv);
      });

      updateScores(hideDealer);
    }

    function calculateScore(hand) {
      let score = 0;
      let aces = 0;
      hand.forEach(card => {
        score += card.value;
        if (card.rank === 'A') aces++;
      });
      while (score > 21 && aces > 0) {
        score -= 10;
        aces--;
      }
      return score;
    }

    function updateScores(hideDealer = true) {
      const playerScore = calculateScore(playerHand);
      document.getElementById('playerScore').textContent = `Score: ${playerScore}`;
      
      if (hideDealer) {
        document.getElementById('dealerScore').textContent = `Score: ${dealerHand[0].value}`;
      } else {
        const dealerScore = calculateScore(dealerHand);
        document.getElementById('dealerScore').textContent = `Score: ${dealerScore}`;
      }
    }

    function hit() {
      playerHand.push(drawCard());
      renderHands();
      const score = calculateScore(playerHand);
      if (score > 21) {
        endGame('bust');
      } else if (score === 21) {
        stand();
      }
    }

    function stand() {
      document.getElementById('gameControls').style.display = 'none';
      dealerPlay();
    }

    function doubleDown() {
      if (currentBet * 2 > bank + currentBet) {
        showMessage('Not enough money to double!', 'lose');
        return;
      }
      bank -= currentBet;
      currentBet *= 2;
      updateBank();
      playerHand.push(drawCard());
      renderHands();
      stand();
    }

    function split() {
      // Simplified - not fully implemented
      showMessage('Split not available', 'push');
    }

    function insurance() {
      // Simplified - not fully implemented
      showMessage('Insurance not available', 'push');
    }

    function dealerPlay() {
      renderHands(false);
      let dealerScore = calculateScore(dealerHand);
      
      const dealerTurn = setInterval(() => {
        if (dealerScore < 17) {
          dealerHand.push(drawCard());
          renderHands(false);
          dealerScore = calculateScore(dealerHand);
        } else {
          clearInterval(dealerTurn);
          determineWinner();
        }
      }, 1000);
    }

    function determineWinner() {
      const playerScore = calculateScore(playerHand);
      const dealerScore = calculateScore(dealerHand);

      if (dealerScore > 21) {
        endGame('win', 'Dealer busts! You win!');
      } else if (playerScore > dealerScore) {
        endGame('win', 'You win!');
      } else if (dealerScore > playerScore) {
        endGame('lose', 'Dealer wins!');
      } else {
        endGame('push', 'Push! Tie game!');
      }
    }

    function checkBlackjack() {
      const playerScore = calculateScore(playerHand);
      const dealerScore = calculateScore(dealerHand);
      
      if (playerScore === 21) {
        if (dealerScore === 21) {
          endGame('push', 'Both Blackjack! Push!');
        } else {
          endGame('blackjack', 'BLACKJACK! You win 3:2!');
        }
      }
    }

    function endGame(result, message = '') {
      gameActive = false;
      renderHands(false);

      let winnings = 0;
      if (result === 'win') {
        winnings = currentBet * 2;
        showMessage(message || 'You Win!', 'win');
      } else if (result === 'blackjack') {
        winnings = currentBet * 2.5;
        showMessage(message || 'BLACKJACK!', 'win');
      } else if (result === 'push') {
        winnings = currentBet;
        showMessage(message || 'Push!', 'push');
      } else if (result === 'bust') {
        showMessage('Bust! You lose!', 'lose');
      } else if (result === 'lose') {
        showMessage(message || 'Dealer wins!', 'lose');
      }

      bank += winnings;
      updateBank();

      setTimeout(() => {
        resetGame();
      }, 3000);
    }

    function showMessage(text, type) {
      const msgDiv = document.getElementById('gameMessage');
      msgDiv.textContent = text;
      msgDiv.className = `game-message msg-${type}`;
      msgDiv.style.display = 'flex';
    }

    function resetGame() {
      playerHand = [];
      dealerHand = [];
      currentBet = 0;
      document.getElementById('currentBet').textContent = 0;
      document.getElementById('bettingArea').style.display = 'block';
      document.getElementById('gameControls').style.display = 'none';
      document.getElementById('gameMessage').style.display = 'none';
      document.getElementById('playerCards').innerHTML = '';
      document.getElementById('dealerCards').innerHTML = '';
      document.getElementById('playerScore').textContent = '—';
      document.getElementById('dealerScore').textContent = '—';
    }

    function updateBank() {
      document.getElementById('bankAmount').textContent = `$${bank}`;
    }

    // Initialize
    initDeck();
    updateBank();
  </script>
</body>
</html>
