<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional Snake</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #1a1a1a;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding: 15px;
      margin: 0;
      overflow: hidden;
    }
    .game-wrapper {
      background: #2a2a2a;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      max-width: 650px;
      width: 100%;
      max-height: 95vh;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }
    .header { text-align: center; margin-bottom: 20px; }
    .title { font-size: 36px; margin-bottom: 10px; }
    .stats-bar {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
      padding: 15px;
      background: #1a1a1a;
      border-radius: 12px;
    }
    .stat { text-align: center; }
    .stat-label { font-size: 12px; opacity: 0.7; margin-bottom: 5px; }
    .stat-value { font-size: 24px; font-weight: bold; color: #22c55e; }
    .game-canvas {
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      display: block;
      margin: 0 auto 15px;
      background: linear-gradient(135deg, #86efac 0%, #4ade80 100%);
      max-width: 100%;
      height: auto;
      aspect-ratio: 1;
    }
    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }
    .btn {
      padding: 12px 24px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      color: white;
    }
    .btn-primary { background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); }
    .btn-secondary { background: #6b7280; }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
    .difficulty-selector {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 15px;
    }
    .diff-btn {
      padding: 10px 20px;
      font-size: 14px;
      font-weight: bold;
      border: 2px solid #3a3a3a;
      border-radius: 8px;
      cursor: pointer;
      background: #3a3a3a;
      color: white;
      transition: all 0.3s;
    }
    .diff-btn.active {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      border-color: #22c55e;
    }
    .game-over-screen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      padding: 40px;
      border-radius: 16px;
      text-align: center;
      display: none;
    }
    .game-over-title { font-size: 48px; margin-bottom: 20px; color: #ef4444; }
    .final-score { font-size: 24px; margin-bottom: 30px; }
    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: #2a2a2a;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <button class="back-btn" onclick="window.location.href='/ghub'">‚Üê Back</button>
  
  <div class="game-wrapper">
    <div class="header">
      <div class="title">üêç SNAKE</div>
    </div>
    
    <div class="stats-bar">
      <div class="stat">
        <div class="stat-label">Score</div>
        <div class="stat-value" id="score">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">High Score</div>
        <div class="stat-value" id="highScore">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Length</div>
        <div class="stat-value" id="length">3</div>
      </div>
    </div>

    <div class="difficulty-selector">
      <button class="diff-btn" onclick="setDifficulty('easy')">Easy</button>
      <button class="diff-btn active" onclick="setDifficulty('normal')">Normal</button>
      <button class="diff-btn" onclick="setDifficulty('hard')">Hard</button>
    </div>

    <canvas id="gameCanvas" class="game-canvas" width="600" height="600"></canvas>

    <div class="controls">
      <button class="btn btn-primary" id="startBtn" onclick="startGame()">START GAME</button>
      <button class="btn btn-secondary" onclick="resetGame()">RESET</button>
    </div>

    <div id="gameOverScreen" class="game-over-screen">
      <div class="game-over-title">GAME OVER!</div>
      <div class="final-score">Final Score: <span id="finalScore">0</span></div>
      <button class="btn btn-primary" onclick="restartGame()">PLAY AGAIN</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const gridSize = 30;
    const tileCount = canvas.width / gridSize;

    let snake = [{x: 10, y: 10}];
    let food = {x: 15, y: 15};
    let dx = 0;
    let dy = 0;
    let score = 0;
    let highScore = localStorage.getItem('snakeHighScore') || 0;
    let gameLoop;
    let gameSpeed = 120;
    let gameRunning = false;

    document.getElementById('highScore').textContent = highScore;

    // Draw grass background
    function drawBackground() {
      for (let i = 0; i < tileCount; i++) {
        for (let j = 0; j < tileCount; j++) {
          const shade = (i + j) % 2 === 0 ? '#86efac' : '#4ade80';
          ctx.fillStyle = shade;
          ctx.fillRect(i * gridSize, j * gridSize, gridSize, gridSize);
        }
      }
    }

    // Draw smooth rounded snake
    function drawSnake() {
      snake.forEach((segment, index) => {
        // Smooth blue gradient
        const gradient = ctx.createRadialGradient(
          segment.x * gridSize + gridSize/2,
          segment.y * gridSize + gridSize/2,
          0,
          segment.x * gridSize + gridSize/2,
          segment.y * gridSize + gridSize/2,
          gridSize/2
        );
        gradient.addColorStop(0, '#60a5fa');
        gradient.addColorStop(1, '#3b82f6');
        
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(
          segment.x * gridSize + gridSize/2,
          segment.y * gridSize + gridSize/2,
          gridSize/2 - 2,
          0,
          2 * Math.PI
        );
        ctx.fill();

        // Eyes on head
        if (index === 0) {
          ctx.fillStyle = 'white';
          ctx.beginPath();
          ctx.arc(segment.x * gridSize + 10, segment.y * gridSize + 10, 3, 0, 2 * Math.PI);
          ctx.fill();
          ctx.beginPath();
          ctx.arc(segment.x * gridSize + 20, segment.y * gridSize + 10, 3, 0, 2 * Math.PI);
          ctx.fill();
        }
      });
    }

    // Draw realistic apple
    function drawFood() {
      const x = food.x * gridSize + gridSize/2;
      const y = food.y * gridSize + gridSize/2;
      const radius = gridSize/2 - 3;

      // Apple body with gradient
      const gradient = ctx.createRadialGradient(x - 5, y - 5, 0, x, y, radius);
      gradient.addColorStop(0, '#fca5a5');
      gradient.addColorStop(0.5, '#ef4444');
      gradient.addColorStop(1, '#dc2626');
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(x, y, radius, 0, 2 * Math.PI);
      ctx.fill();

      // Highlight
      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
      ctx.beginPath();
      ctx.arc(x - 5, y - 5, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Stem
      ctx.strokeStyle = '#4ade80';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(x, y - radius);
      ctx.lineTo(x + 5, y - radius - 8);
      ctx.stroke();
    }

    function update() {
      if (!gameRunning) return;

      const head = {x: snake[0].x + dx, y: snake[0].y + dy};

      // Wall collision
      if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
        gameOver();
        return;
      }

      // Self collision
      if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
        gameOver();
        return;
      }

      snake.unshift(head);

      // Food collision
      if (head.x === food.x && head.y === food.y) {
        score += 10;
        document.getElementById('score').textContent = score;
        document.getElementById('length').textContent = snake.length;
        spawnFood();
        
        if (score > highScore) {
          highScore = score;
          localStorage.setItem('snakeHighScore', highScore);
          document.getElementById('highScore').textContent = highScore;
        }
      } else {
        snake.pop();
      }

      draw();
    }

    function draw() {
      drawBackground();
      drawFood();
      drawSnake();
    }

    function spawnFood() {
      food = {
        x: Math.floor(Math.random() * tileCount),
        y: Math.floor(Math.random() * tileCount)
      };
      
      // Ensure food doesn't spawn on snake
      if (snake.some(segment => segment.x === food.x && segment.y === food.y)) {
        spawnFood();
      }
    }

    function startGame() {
      if (gameRunning) return;
      gameRunning = true;
      snake = [{x: 10, y: 10}];
      dx = 1;
      dy = 0;
      score = 0;
      document.getElementById('score').textContent = 0;
      document.getElementById('length').textContent = 3;
      document.getElementById('startBtn').textContent = 'PLAYING...';
      document.getElementById('gameOverScreen').style.display = 'none';
      spawnFood();
      gameLoop = setInterval(update, gameSpeed);
    }

    function gameOver() {
      gameRunning = false;
      clearInterval(gameLoop);
      document.getElementById('finalScore').textContent = score;
      document.getElementById('gameOverScreen').style.display = 'block';
      document.getElementById('startBtn').textContent = 'START GAME';
    }

    function resetGame() {
      gameRunning = false;
      clearInterval(gameLoop);
      snake = [{x: 10, y: 10}];
      dx = 0;
      dy = 0;
      score = 0;
      document.getElementById('score').textContent = 0;
      document.getElementById('length').textContent = 3;
      document.getElementById('startBtn').textContent = 'START GAME';
      document.getElementById('gameOverScreen').style.display = 'none';
      draw();
    }

    function restartGame() {
      resetGame();
      startGame();
    }

    function setDifficulty(level) {
      document.querySelectorAll('.diff-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      if (level === 'easy') gameSpeed = 150;
      else if (level === 'normal') gameSpeed = 120;
      else if (level === 'hard') gameSpeed = 80;
      
      if (gameRunning) {
        clearInterval(gameLoop);
        gameLoop = setInterval(update, gameSpeed);
      }
    }

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (!gameRunning) return;
      
      switch(e.key) {
        case 'ArrowUp':
        case 'w':
        case 'W':
          if (dy === 0) { dx = 0; dy = -1; }
          break;
        case 'ArrowDown':
        case 's':
        case 'S':
          if (dy === 0) { dx = 0; dy = 1; }
          break;
        case 'ArrowLeft':
        case 'a':
        case 'A':
          if (dx === 0) { dx = -1; dy = 0; }
          break;
        case 'ArrowRight':
        case 'd':
        case 'D':
          if (dx === 0) { dx = 1; dy = 0; }
          break;
      }
    });

    // Initial draw
    draw();
  </script>
</body>
</html>
